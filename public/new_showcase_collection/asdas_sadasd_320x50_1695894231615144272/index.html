<!DOCTYPE HTML>
<html>
<head>
<title>Radio 10</title>
<meta name="ad.size" content="width=320,height=50">
<link rel="stylesheet" type="text/css" href="css/style.css">
<script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.5.1_min.js"></script>
</head>

<body onload="myFunction()">
<a href="javascript:void(0)">
    <div id="banner">
        <img src="assets/bg.jpg" id="bg">
        <img src="assets/shape2.png" id="shape2" class="left">
        <img src="assets/text1.png" id="text1" class="left">
        <img src="assets/text2.png" id="text2" class="left">
        <img src="assets/shape1.png" id="shape1" class="left">
        <img src="assets/jackpot.png" id="jackpot" class="left">
        <img src="assets/logo.png" id="logo" class="left">
        <img src="assets/cta.png" id="cta">
        <div id="price_div" class="left">
            <p id="price"></p>
        </div>
        <img src="assets/rob.png" id="rob">
    </div>
</a>

<script>
    
    function myFunction() {
        apiLoad();
        var tl = new TimelineMax({ repeat: -1, repeatDelay: .15});        
//        var tl = new TimelineMax({});

        tl
        .to('img', {duration: 0, display: 'block'})
        .add('f1', '=+0.5')
        .to('#shape2, #text1', {duration: 0.75, x: 0, ease: 'power3.out'}, 'f1+=0.25')
        
        .add('f2', '+=1')
        .to('#text1', {duration: 0.75, x:-320, opacity: 0, ease: 'power3.in'}, 'f2')
        .to('#text2', {duration: 0.75, x: 0, ease: 'power3.out'}, 'f2+=0.55')
        .to('#shape2', {duration: 0.75, x: -32, ease: 'power3.in'}, 'f2-=.15')
        
        .add('f3', '+=0.85')
        .to('.left', {duration: 0.75, x: -320, ease: 'power3.in'}, 'f3')
        
        .add('f4')
        .to('#logo', {duration: 0.75, x: 0, ease: 'power3.out'}, 'f4')
        .to('#jackpot, #shape1, #price_div', {duration: 0.75, x: 0, opacity: 1, ease: 'power3.out'}, 'f4-=0.12')
        
        .to('#jackpot, #shape1, #price_div, #logo', {duration: 0.75, x: -320, ease: 'power3.in'}, '+=1')
        
        .to('#cta', {duration: 0.75, scale: 1, opacity: 1, ease: 'back.out'})
        
        .to('#cta', {duration: 0.5, scale: 1.06, yoyo: true, repeat: 3, ease: 'power2.out'}, '+=0.75')
        
        .to('#cta', {duration: 0.5, scale: 0, opacity: 0, ease: 'back.in'}, '+=0.25')


            function apiLoad(){
            fetch('https://data.radio10.nl/lachvan10/amount.json')
            .then(res => res.json())
            .then((out) => {
            var money = out.amount;
//                var money = 5000000;
            if(money.toString().length < 4)
            {
//                    console.log('less than 4');
                document.getElementById('price').style.left="139px";
            }
            else if(money.toString().length == 4)
            {
//                    console.log('equal to 4');
                document.getElementById('price').style.left="139px";
            }
            else if(money.toString().length == 5)
            {
//                    console.log('equal to 5');
                document.getElementById('price').style.left="139px";
            }
            else if(money.toString().length > 5)
            {
//                    console.log('greater than 5');
                document.getElementById('price').style.left="133px";                       document.getElementById('jackpot').style.left="-5px";
            }
            var money_currency = money.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
            var money = money_currency;
            var aa = document.getElementById('price');
            aa.innerHTML=  money;
            }).catch(err => console.error(err));
        }
        setInterval(function() {
            apiLoad();
        }, 30000)    
    }
</script>
<!-- DCM Code -->
<script type="text/javascript">
    var clickTag = "https://www.radio10.nl/";
    var banner = document.getElementById("banner");
    banner.style.cursor = "pointer";

    banner.addEventListener("click", goURL);


    function goURL() {
        window.open(clickTag);
    }
</script>
</body>
</html>